{% extends "base.html"%}
{% load static%}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-md-8 mt-3 offset-md-2">
        <h2 class="text-center mb-3">My Bookings</h2>
        <!--View Bookings-->
        {% if bookings %}
        <ul class="list-group">
            {% for booking in bookings %}
            <li class="list-group-item mb-2">
                <strong>Date:</strong> {{ booking.date }}<br>
                <strong>Time:</strong> {{ booking.time }}<br>
                <strong>Number of guests:</strong> {{ booking.guests }}<br>
                <strong>Status:</strong> {{ booking.get_status_display }}

                {% if booking.status != 'cancelled' and booking.status != 'completed' %}
                <form action="{% url 'cancel_booking' booking.id %}" method="post" onsubmit="return confirm('Are you sure you want to cancel this booking?');">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm btn-danger float-end">Cancel</button>
                </form>
            {% endif %}
            </li>
        {% endfor %}
        </ul>
        {% else %}
        <p class="text-center mt-4">You haven't made any bookings yet.</p>
        {% endif %}
    </div>
</div>
</div>
{% endblock %}